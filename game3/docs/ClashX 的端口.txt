第一步：尋找 ClashX 的端口
ClashX 的端口通常可以在「控制面板」或菜單中直接看到。

點擊菜單欄圖示：點擊螢幕頂部狀態欄的 ClashX 小貓圖示。

查看端口：

在彈出的菜單中，通常會直接顯示 HTTP 代理端口: 7890（或者是 混合端口: 7890）。

如果沒看到：點擊 「控制面板」(Dashboard) -> 點擊左側的 「設置」(Settings)。

在 「基礎設置」(General) 中，找到 「HTTP 端口」 或 「混合端口」(Mixed Port)。

預設值通常是：7890。

🚀 第二步：在終端機中開啟代理
拿到端口號（假設是 7890）後，回到你的終端機（Terminal），輸入以下指令：

Bash
# 注意：如果你的端口不是 7890，請自行替換數字
export https_proxy=http://127.0.0.1:7890
export http_proxy=http://127.0.0.1:7890
驗證是否成功

輸入這行指令，看看能不能連上 Anthropic 的伺服器：

Bash
curl -I https://api.anthropic.com
成功標誌：返回 HTTP/2 403 或 404（這是正常的回傳，代表連上網了）。

失敗標誌：顯示 Failed to connect。

🤖 第三步：運行 Claude Code
一旦 curl 驗證成功，你就可以直接運行：

Bash
claude
這時候它應該就能成功連接並引導你登入了。

💡 進階技巧：一鍵開關代理
為了不用每次都打這串指令，我建議你把這個功能寫進你的 .zshrc 設定檔中。

輸入 nano ~/.zshrc 打開設定檔。

在最下面貼入這段代碼：

Bash
# 一鍵開啟代理
proxyon() {
    export https_proxy=http://127.0.0.1:7890
    export http_proxy=http://127.0.0.1:7890
    echo "終端代理已開啟 (Port: 7890)"
}

# 一鍵關閉代理
proxyoff() {
    unset https_proxy
    unset http_proxy
    echo "終端代理已關閉"
}
儲存退出後，輸入 source ~/.zshrc。

以後的操作：

想用 Claude 時，輸入 proxyon。

不想用時，輸入 proxyoff。

你的 ClashX 端口是 7890 嗎？如果連線還是失敗，請確認你的 ClashX 已經開啟了「增強模式 (Enhanced Mode)」或者是「系統代理 (System Proxy)」。