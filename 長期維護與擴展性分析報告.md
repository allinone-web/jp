# L1J é–‹æºé …ç›® vs Server-182ï¼šé•·æœŸç¶­è­·èˆ‡æ“´å±•æ€§æ·±åº¦åˆ†æ

## ä¸€ã€é•·æœŸç¶­è­·æ€§å°æ¯”

### 1.1 ä»£ç¢¼çµæ§‹èˆ‡å¯ç¶­è­·æ€§

#### **L1J é–‹æºé …ç›® â­â­â­â­â­**

**å„ªå‹¢ï¼š**
- âœ… **æ¨¡å¡ŠåŒ–è¨­è¨ˆ**ï¼šæ¸…æ™°çš„åˆ†å±¤æ¶æ§‹ï¼ˆmodel, datatables, packets, controllerï¼‰
- âœ… **å–®ä¸€è·è²¬åŸå‰‡**ï¼šæ¯å€‹é¡è·è²¬æ˜ç¢ºï¼Œæ˜“æ–¼ç†è§£å’Œä¿®æ”¹
- âœ… **å®Œæ•´çš„è¨»é‡‹**ï¼šæ—¥æ–‡è¨»é‡‹è©³ç´°ï¼Œä¾¿æ–¼ç†è§£æ¥­å‹™é‚è¼¯
- âœ… **æ¨™æº– Java è¦ç¯„**ï¼šéµå¾ª Java å‘½åè¦ç¯„å’Œè¨­è¨ˆæ¨¡å¼
- âœ… **é¡å‹å®‰å…¨**ï¼šä½¿ç”¨æ³›å‹ã€è¨»è§£ç­‰ç¾ä»£ Java ç‰¹æ€§

**ç¤ºä¾‹ï¼š**
```java
// L1J - æ¸…æ™°çš„æ¨¡å¡ŠåŒ–çµæ§‹
jp.l1j.server.model.map.L1InstanceMap  // å¯¦ä¾‹åœ°åœ–ç®¡ç†
jp.l1j.server.model.L1World            // ä¸–ç•Œç®¡ç†
jp.l1j.server.datatables.UbTable       // æ•¸æ“šè¡¨ç®¡ç†
```

**ç¶­è­·æˆæœ¬ï¼š** â­â­â­â­ (ä½)
- æ–°é–‹ç™¼è€…å®¹æ˜“ä¸Šæ‰‹
- ä»£ç¢¼ä¿®æ”¹å½±éŸ¿ç¯„åœå¯æ§
- æ¸¬è©¦å’Œèª¿è©¦ç›¸å°å®¹æ˜“

#### **Server-182 â­â­â­**

**å„ªå‹¢ï¼š**
- âœ… **ä»£ç¢¼ç°¡æ½”**ï¼šç›´æ¥æ˜äº†ï¼Œæ²’æœ‰éåº¦è¨­è¨ˆ
- âœ… **æ€§èƒ½å„ªåŒ–**ï¼šä½¿ç”¨ MINA æ¡†æ¶ï¼Œç¶²çµ¡æ€§èƒ½å„ªç§€

**åŠ£å‹¢ï¼š**
- âš ï¸ **æ‰å¹³åŒ–çµæ§‹**ï¼šæ‰€æœ‰é¡éƒ½åœ¨ `net.*` åŒ…ä¸‹ï¼Œç¼ºä¹å±¤æ¬¡
- âš ï¸ **è·è²¬æ··é›œ**ï¼šéƒ¨åˆ†é¡æ‰¿æ“”å¤šå€‹è·è²¬
- âš ï¸ **è¨»é‡‹ä¸è¶³**ï¼šä¸­æ–‡è¨»é‡‹è¼ƒå°‘ï¼Œéƒ¨åˆ†é‚è¼¯éœ€è¦é–±è®€ä»£ç¢¼ç†è§£
- âš ï¸ **æŠ€è¡“å‚µå‹™**ï¼šéƒ¨åˆ†ä»£ç¢¼é¢¨æ ¼ä¸çµ±ä¸€

**ç¶­è­·æˆæœ¬ï¼š** â­â­â­ (ä¸­ç­‰)
- éœ€è¦ç†Ÿæ‚‰æ•´å€‹ä»£ç¢¼åº«æ‰èƒ½ä¿®æ”¹
- ä¿®æ”¹å¯èƒ½å½±éŸ¿å¤šå€‹æ¨¡å¡Š
- æ–°äººä¸Šæ‰‹æ™‚é–“è¼ƒé•·

### 1.2 é…ç½®ç®¡ç†èˆ‡å¯æ“´å±•æ€§

#### **L1J é–‹æºé …ç›® â­â­â­â­â­**

```java
// ä½¿ç”¨è¨»è§£ç³»çµ±ï¼Œé¡å‹å®‰å…¨
@Configure(file = SERVER, key = "GameserverPort")
public static int GAME_SERVER_PORT = 2000;

// è‡ªå‹•åŠ è¼‰ï¼Œç„¡éœ€æ‰‹å‹•è®€å–
Config.load();
```

**å„ªå‹¢ï¼š**
- âœ… **é¡å‹å®‰å…¨**ï¼šç·¨è­¯æ™‚æª¢æŸ¥é…ç½®éŒ¯èª¤
- âœ… **è‡ªå‹•åŠ è¼‰**ï¼šæ¸›å°‘æ‰‹å‹•ä»£ç¢¼
- âœ… **å¤šæ–‡ä»¶æ”¯æŒ**ï¼šä¸åŒé…ç½®åˆ†é›¢ç®¡ç†
- âœ… **æ˜“æ–¼æ“´å±•**ï¼šæ·»åŠ æ–°é…ç½®åªéœ€æ·»åŠ è¨»è§£

#### **Server-182 â­â­â­**

```java
// æ‰‹å‹•è®€å– Properties
public static int SERVER_PORT = 2000;
public static String DRIVER;
// éœ€è¦æ‰‹å‹•è³¦å€¼
```

**åŠ£å‹¢ï¼š**
- âš ï¸ **æ‰‹å‹•ç®¡ç†**ï¼šéœ€è¦æ‰‹å‹•è®€å–å’Œè³¦å€¼
- âš ï¸ **é¡å‹ä¸å®‰å…¨**ï¼šå®¹æ˜“å‡ºç¾é¡å‹éŒ¯èª¤
- âš ï¸ **æ“´å±•å›°é›£**ï¼šæ·»åŠ æ–°é…ç½®éœ€è¦ä¿®æ”¹å¤šè™•ä»£ç¢¼

### 1.3 æ¸¬è©¦èˆ‡èª¿è©¦

#### **L1J é–‹æºé …ç›® â­â­â­â­**

- âœ… æ¨¡å¡ŠåŒ–è¨­è¨ˆä¾¿æ–¼å–®å…ƒæ¸¬è©¦
- âœ… æ¸…æ™°çš„æ¥å£å®šç¾©
- âœ… æ—¥èªŒç³»çµ±å®Œå–„

#### **Server-182 â­â­â­**

- âš ï¸ æ‰å¹³çµæ§‹æ¸¬è©¦è¼ƒå›°é›£
- âš ï¸ ä¾è³´é—œä¿‚è¤‡é›œ

---

## äºŒã€åŠŸèƒ½æ“´å±•æ€§å°æ¯”ï¼ˆä»¥ 5v5 å°æˆ°åœ°åœ–ç‚ºä¾‹ï¼‰

### 2.1 å¯¦ä¾‹åœ°åœ–ç³»çµ±

#### **L1J é–‹æºé …ç›® â­â­â­â­â­**

**å·²æœ‰å®Œæ•´å¯¦ä¾‹åœ°åœ–ç³»çµ±ï¼š**

```java
// L1InstanceMap.java - å¯¦ä¾‹åœ°åœ–ç®¡ç†
public class L1InstanceMap {
    private static final short FIRST_ID = 10000;
    private static final short LAST_ID = 12000;
    
    // å‹•æ…‹å‰µå»ºå¯¦ä¾‹åœ°åœ–
    public int addInstanceMap(int mapId) {
        L1Map instanceMap = L1WorldMap.getInstance()
            .getMap((short)mapId).clone();
        int nextId = nextId();
        instanceMap.setId(nextId);
        L1WorldMap.getInstance().addMap(instanceMap);
        return instanceMap.getId();
    }
    
    // å‹•æ…‹åˆªé™¤å¯¦ä¾‹åœ°åœ–
    public boolean removeInstanceMap(int mapId) {
        L1WorldMap.getInstance().removeMap(mapId);
        return true;
    }
}
```

**å¯¦ç¾ 5v5 å°æˆ°åœ°åœ–çš„å„ªå‹¢ï¼š**

1. **ç›´æ¥ä½¿ç”¨ç¾æœ‰ç³»çµ±**
   ```java
   // å‰µå»ºå°æˆ°åœ°åœ–å¯¦ä¾‹
   int battleMapId = L1InstanceMap.getInstance()
       .addInstanceMap(baseMapId);
   
   // å‚³é€ç©å®¶åˆ°å¯¦ä¾‹åœ°åœ–
   player.setMap((short)battleMapId);
   player.setLocation(new L1Location(x, y, (short)battleMapId));
   ```

2. **å·²æœ‰å°æˆ°ç³»çµ±åƒè€ƒ**
   - `L1UltimateBattle` - çµ‚æ¥µå°æˆ°ç³»çµ±
   - `L1DeathMatch` - æ­»äº¡ç«¶è³½
   - `L1War` - æˆ°çˆ­ç³»çµ±

3. **å®Œæ•´çš„æ•¸æ“šè¡¨æ”¯æŒ**
   - `UbTable` - å°æˆ°é…ç½®è¡¨
   - æ•¸æ“šåº«çµæ§‹å®Œæ•´

**å¯¦ç¾æ­¥é©Ÿï¼ˆL1Jï¼‰ï¼š**
```java
// 1. å‰µå»ºå°æˆ°ç®¡ç†å™¨
public class L1BattleArena {
    private int _mapId;
    private List<L1PcInstance> _team1;
    private List<L1PcInstance> _team2;
    
    public void startBattle() {
        // å‰µå»ºå¯¦ä¾‹åœ°åœ–
        _mapId = L1InstanceMap.getInstance()
            .addInstanceMap(BASE_BATTLE_MAP_ID);
        
        // å‚³é€ç©å®¶
        teleportPlayers();
        
        // é–‹å§‹å°æˆ°é‚è¼¯
        startBattleLogic();
    }
    
    public void endBattle() {
        // æ¸…ç†å¯¦ä¾‹åœ°åœ–
        L1InstanceMap.getInstance()
            .removeInstanceMap(_mapId);
    }
}
```

**é–‹ç™¼æ™‚é–“ä¼°ç®—ï¼š** 2-3 é€±
- å¯¦ä¾‹åœ°åœ–ç³»çµ±ï¼šâœ… å·²æœ‰
- å°æˆ°é‚è¼¯ï¼šå¯åƒè€ƒ `L1UltimateBattle`
- æ•¸æ“šè¡¨ï¼šå¯åƒè€ƒ `UbTable`

#### **Server-182 â­â­**

**æ²’æœ‰å¯¦ä¾‹åœ°åœ–ç³»çµ±ï¼š**

æŸ¥çœ‹ä»£ç¢¼ç™¼ç¾ï¼š
- âŒ æ²’æœ‰ `InstanceMap` é¡
- âŒ åœ°åœ–ç®¡ç†è¼ƒç°¡å–®
- âŒ éœ€è¦å¾é›¶å¯¦ç¾å¯¦ä¾‹åœ°åœ–åŠŸèƒ½

**å¯¦ç¾ 5v5 å°æˆ°åœ°åœ–çš„å›°é›£ï¼š**

1. **éœ€è¦å¯¦ç¾å¯¦ä¾‹åœ°åœ–ç³»çµ±**
   ```java
   // éœ€è¦è‡ªå·±å¯¦ç¾
   public class InstanceMapManager {
       // éœ€è¦å¯¦ç¾åœ°åœ–å…‹éš†
       // éœ€è¦å¯¦ç¾åœ°åœ–ç®¡ç†
       // éœ€è¦å¯¦ç¾åœ°åœ–æ¸…ç†
   }
   ```

2. **æ¶æ§‹é™åˆ¶**
   - `WorldMap` çµæ§‹è¼ƒç°¡å–®
   - ç¼ºä¹å‹•æ…‹åœ°åœ–ç®¡ç†æ©Ÿåˆ¶

3. **éœ€è¦å¤§é‡ä¿®æ”¹ç¾æœ‰ä»£ç¢¼**
   - ä¿®æ”¹ `WorldInstance`
   - ä¿®æ”¹åœ°åœ–åŠ è¼‰é‚è¼¯
   - ä¿®æ”¹ç©å®¶å‚³é€é‚è¼¯

**å¯¦ç¾æ­¥é©Ÿï¼ˆServer-182ï¼‰ï¼š**
```java
// 1. å…ˆå¯¦ç¾å¯¦ä¾‹åœ°åœ–ç³»çµ±ï¼ˆéœ€è¦ 1-2 é€±ï¼‰
public class InstanceMapManager {
    // éœ€è¦å¯¦ç¾å®Œæ•´çš„åœ°åœ–å…‹éš†å’Œç®¡ç†
}

// 2. ä¿®æ”¹ WorldMap æ”¯æŒå‹•æ…‹åœ°åœ–
// 3. å¯¦ç¾å°æˆ°ç®¡ç†å™¨
// 4. ä¿®æ”¹ç›¸é—œçš„å‚³é€å’Œæ¸…ç†é‚è¼¯
```

**é–‹ç™¼æ™‚é–“ä¼°ç®—ï¼š** 4-6 é€±
- å¯¦ä¾‹åœ°åœ–ç³»çµ±ï¼šâŒ éœ€è¦å¾é›¶å¯¦ç¾ï¼ˆ2-3 é€±ï¼‰
- å°æˆ°é‚è¼¯ï¼šéœ€è¦è‡ªå·±è¨­è¨ˆï¼ˆ1-2 é€±ï¼‰
- æ•¸æ“šè¡¨ï¼šéœ€è¦è‡ªå·±è¨­è¨ˆï¼ˆ1 é€±ï¼‰

### 2.2 æ•¸æ“šè¡¨æ“´å±•æ€§

#### **L1J é–‹æºé …ç›® â­â­â­â­â­**

**å·²æœ‰å®Œæ•´çš„æ•¸æ“šè¡¨ç³»çµ±ï¼š**

```java
// 63 å€‹æ•¸æ“šè¡¨é¡ï¼Œçµæ§‹å®Œæ•´
- UbTable (å°æˆ°é…ç½®)
- DungeonTable (å‰¯æœ¬)
- SpawnTable (åˆ·æ€ª)
- MapTable (åœ°åœ–)
// ... ç­‰ç­‰
```

**æ“´å±•æ–°åŠŸèƒ½ï¼š**
```java
// 1. å‰µå»ºæ•¸æ“šè¡¨é¡
public class BattleArenaTable {
    private HashMap<Integer, L1BattleArenaConfig> _arenas;
    
    public void load() {
        // å¾æ•¸æ“šåº«åŠ è¼‰é…ç½®
    }
}

// 2. å‰µå»ºé…ç½® Bean
public class L1BattleArenaConfig {
    private int _id;
    private int _mapId;
    private int _maxPlayers;
    // ...
}

// 3. åœ¨ GameServer.initialize() ä¸­åŠ è¼‰
BattleArenaTable.getInstance();
```

#### **Server-182 â­â­â­**

**æ•¸æ“šè¡¨ç³»çµ±è¼ƒç°¡å–®ï¼š**

```java
// 36 å€‹æ•¸æ“šè¡¨é¡
- åŸºç¤åŠŸèƒ½å®Œæ•´
- ä½†ç¼ºä¹å°æˆ°ç›¸é—œçš„å®Œæ•´æ”¯æŒ
```

**æ“´å±•éœ€è¦ï¼š**
- éœ€è¦è‡ªå·±è¨­è¨ˆæ•¸æ“šè¡¨çµæ§‹
- éœ€è¦è‡ªå·±å¯¦ç¾åŠ è¼‰é‚è¼¯

### 2.3 ç¶²çµ¡å°åŒ…æ“´å±•æ€§

#### **L1J é–‹æºé …ç›® â­â­â­â­**

**å°åŒ…è™•ç†æ¸…æ™°ï¼š**

```java
// PacketHandler.java - Switch-case è™•ç†
switch (opcode) {
    case C_OPCODE_BATTLE_JOIN:
        new C_BattleJoin(data, _client);
        break;
    // æ˜“æ–¼æ·»åŠ æ–°å°åŒ…
}
```

**æ·»åŠ æ–°å°åŒ…ï¼š**
1. åœ¨ `Opcodes.java` å®šç¾© Opcode
2. å‰µå»ºå°åŒ…è™•ç†é¡
3. åœ¨ `PacketHandler` æ·»åŠ  case

#### **Server-182 â­â­â­**

**HashMap æ˜ å°„ï¼š**

```java
// Opcodes.java - HashMap æ˜ å°„
static {
    put(Integer.valueOf(1), new C_Logins());
    // éœ€è¦ä¿®æ”¹éœæ…‹åˆå§‹åŒ–å¡Š
}
```

**æ·»åŠ æ–°å°åŒ…ï¼š**
1. åœ¨ `Opcodes.java` å®šç¾© Opcode
2. å‰µå»ºå°åŒ…è™•ç†é¡
3. åœ¨éœæ…‹åˆå§‹åŒ–å¡Šä¸­è¨»å†Š

---

## ä¸‰ã€ç©©å®šæ€§å°æ¯”

### 3.1 æ¶æ§‹ç©©å®šæ€§

#### **L1J é–‹æºé …ç›® â­â­â­â­â­**

**å„ªå‹¢ï¼š**
- âœ… **æ¨¡å¡ŠåŒ–è¨­è¨ˆ**ï¼šä¿®æ”¹ä¸€å€‹æ¨¡å¡Šä¸å½±éŸ¿å…¶ä»–æ¨¡å¡Š
- âœ… **æ¥å£æ¸…æ™°**ï¼šä¾è³´é—œä¿‚æ˜ç¢º
- âœ… **æ˜“æ–¼æ¸¬è©¦**ï¼šå¯ä»¥å–®ç¨æ¸¬è©¦å„å€‹æ¨¡å¡Š
- âœ… **éŒ¯èª¤éš”é›¢**ï¼šå•é¡Œå®¹æ˜“å®šä½

**é¢¨éšªè©•ä¼°ï¼š**
- ä½é¢¨éšªï¼šæ–°åŠŸèƒ½æ·»åŠ åœ¨ç¨ç«‹æ¨¡å¡Š
- ä½é¢¨éšªï¼šä¿®æ”¹å½±éŸ¿ç¯„åœå¯æ§

#### **Server-182 â­â­â­**

**åŠ£å‹¢ï¼š**
- âš ï¸ **ç·Šè€¦åˆ**ï¼šæ¨¡å¡Šé–“ä¾è³´è¼ƒå¤š
- âš ï¸ **ä¿®æ”¹é¢¨éšª**ï¼šä¿®æ”¹å¯èƒ½å½±éŸ¿å¤šå€‹åœ°æ–¹
- âš ï¸ **æ¸¬è©¦å›°é›£**ï¼šéœ€è¦æ¸¬è©¦æ•´å€‹ç³»çµ±

**é¢¨éšªè©•ä¼°ï¼š**
- ä¸­é¢¨éšªï¼šæ–°åŠŸèƒ½å¯èƒ½å½±éŸ¿ç¾æœ‰åŠŸèƒ½
- ä¸­é¢¨éšªï¼šéœ€è¦å…¨é¢æ¸¬è©¦

### 3.2 æ€§èƒ½ç©©å®šæ€§

#### **L1J é–‹æºé …ç›® â­â­â­â­**

- âœ… æ¨™æº– Java Socketï¼Œç©©å®šå¯é 
- âœ… ç·šç¨‹æ± ç®¡ç†å®Œå–„
- âš ï¸ åŒæ­¥ I/Oï¼Œé«˜ä¸¦ç™¼æ™‚å¯èƒ½æˆç‚ºç“¶é ¸

#### **Server-182 â­â­â­â­â­**

- âœ… Apache MINAï¼Œé«˜æ€§èƒ½
- âœ… ç•°æ­¥ NIOï¼Œé«˜ä¸¦ç™¼æ€§èƒ½å„ªç§€
- âœ… é€£æ¥ç®¡ç†å®Œå–„

**æ³¨æ„ï¼š** å°æ–¼ 5v5 å°æˆ°ï¼ˆ10 äººï¼‰ï¼Œå…©å€‹ç‰ˆæœ¬çš„æ€§èƒ½å·®ç•°å¯ä»¥å¿½ç•¥ã€‚

### 3.3 æ•¸æ“šç©©å®šæ€§

#### **L1J é–‹æºé …ç›® â­â­â­â­â­**

- âœ… å®Œæ•´çš„æ•¸æ“šè¡¨ç³»çµ±
- âœ… äº‹å‹™è™•ç†å®Œå–„
- âœ… æ•¸æ“šå‚™ä»½æ©Ÿåˆ¶

#### **Server-182 â­â­â­â­**

- âœ… åŸºç¤æ•¸æ“šåº«æ“ä½œå®Œæ•´
- âš ï¸ æ•¸æ“šè¡¨ç³»çµ±è¼ƒç°¡å–®

---

## å››ã€ç¶œåˆè©•åˆ†èˆ‡å»ºè­°

### 4.1 é•·æœŸç¶­è­·æ€§è©•åˆ†

| è©•ä¼°é …ç›® | L1J é–‹æºé …ç›® | Server-182 | å‹å‡º |
|---------|-------------|-----------|------|
| ä»£ç¢¼çµæ§‹ | â­â­â­â­â­ | â­â­â­ | **L1J** |
| å¯è®€æ€§ | â­â­â­â­â­ | â­â­â­ | **L1J** |
| æ“´å±•æ€§ | â­â­â­â­â­ | â­â­â­ | **L1J** |
| æ¸¬è©¦æ€§ | â­â­â­â­ | â­â­â­ | **L1J** |
| æ€§èƒ½ | â­â­â­â­ | â­â­â­â­â­ | **Server-182** |
| å®‰å…¨æ€§ | â­â­â­â­ | â­â­â­â­â­ | **Server-182** |

**ç¸½åˆ†ï¼š**
- **L1J é–‹æºé …ç›®ï¼š28/30** â­â­â­â­â­
- **Server-182ï¼š22/30** â­â­â­â­

### 4.2 åŠŸèƒ½æ“´å±•æ€§è©•åˆ†ï¼ˆ5v5 å°æˆ°åœ°åœ–ï¼‰

| è©•ä¼°é …ç›® | L1J é–‹æºé …ç›® | Server-182 | å‹å‡º |
|---------|-------------|-----------|------|
| å¯¦ä¾‹åœ°åœ–ç³»çµ± | â­â­â­â­â­ (å·²æœ‰) | â­â­ (éœ€å¯¦ç¾) | **L1J** |
| å°æˆ°ç³»çµ±åƒè€ƒ | â­â­â­â­â­ (æœ‰åƒè€ƒ) | â­â­ (éœ€è¨­è¨ˆ) | **L1J** |
| æ•¸æ“šè¡¨æ”¯æŒ | â­â­â­â­â­ (å®Œæ•´) | â­â­â­ (åŸºç¤) | **L1J** |
| é–‹ç™¼æ™‚é–“ | â­â­â­â­â­ (2-3é€±) | â­â­ (4-6é€±) | **L1J** |
| ç©©å®šæ€§ | â­â­â­â­â­ | â­â­â­ | **L1J** |

**ç¸½åˆ†ï¼š**
- **L1J é–‹æºé …ç›®ï¼š25/25** â­â­â­â­â­
- **Server-182ï¼š12/25** â­â­

### 4.3 æœ€çµ‚å»ºè­°

#### **æ¨è–¦ï¼šL1J é–‹æºé …ç›®** ğŸ†

**ç†ç”±ï¼š**

1. **é•·æœŸç¶­è­·æ€§æ›´å„ª**
   - æ¨¡å¡ŠåŒ–è¨­è¨ˆï¼Œæ˜“æ–¼ç¶­è­·
   - ä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œæ–°äººæ˜“ä¸Šæ‰‹
   - è¨»é‡‹å®Œæ•´ï¼Œä¾¿æ–¼ç†è§£

2. **åŠŸèƒ½æ“´å±•æ€§æ›´å¼·**
   - âœ… **å·²æœ‰å¯¦ä¾‹åœ°åœ–ç³»çµ±**ï¼Œå¯ç›´æ¥ä½¿ç”¨
   - âœ… **å·²æœ‰å°æˆ°ç³»çµ±åƒè€ƒ**ï¼ˆL1UltimateBattleï¼‰
   - âœ… **å®Œæ•´çš„æ•¸æ“šè¡¨ç³»çµ±**ï¼Œæ˜“æ–¼æ“´å±•
   - âœ… **é–‹ç™¼æ™‚é–“çŸ­**ï¼ˆ2-3 é€± vs 4-6 é€±ï¼‰

3. **ç©©å®šæ€§æ›´å¥½**
   - æ¨¡å¡ŠåŒ–è¨­è¨ˆï¼ŒéŒ¯èª¤éš”é›¢
   - ä¿®æ”¹å½±éŸ¿ç¯„åœå¯æ§
   - æ¸¬è©¦å’Œèª¿è©¦å®¹æ˜“

4. **æ€§èƒ½è¶³å¤ **
   - å°æ–¼ 5v5 å°æˆ°ï¼ˆ10 äººï¼‰ï¼Œæ€§èƒ½å·®ç•°å¯å¿½ç•¥
   - æ¨™æº– Socket ç©©å®šå¯é 

#### **Server-182 é©ç”¨å ´æ™¯**

**é©åˆä½¿ç”¨ Server-182ï¼Œå¦‚æœï¼š**
- éœ€è¦æ¥µé«˜çš„ç¶²çµ¡æ€§èƒ½ï¼ˆæ•¸åƒäººåŒæ™‚åœ¨ç·šï¼‰
- éœ€è¦åš´æ ¼çš„å®‰å…¨é˜²è­·
- ä¸éœ€è¦é »ç¹æ“´å±•æ–°åŠŸèƒ½
- åœ˜éšŠç†Ÿæ‚‰ MINA æ¡†æ¶

---

## äº”ã€5v5 å°æˆ°åœ°åœ–å¯¦ç¾æ–¹æ¡ˆï¼ˆL1J é–‹æºé …ç›®ï¼‰

### 5.1 æ¶æ§‹è¨­è¨ˆ

```java
// 1. å°æˆ°é…ç½®æ•¸æ“šè¡¨
public class BattleArenaTable {
    private HashMap<Integer, L1BattleArenaConfig> _arenas;
    
    public void load() {
        // å¾æ•¸æ“šåº«åŠ è¼‰é…ç½®
        // æ”¯æŒå¤šç¨®å°æˆ°æ¨¡å¼é…ç½®
    }
}

// 2. å°æˆ°ç®¡ç†å™¨
public class L1BattleArenaManager {
    private HashMap<Integer, L1BattleArena> _activeArenas;
    
    public L1BattleArena createBattle(
        int configId, 
        List<L1PcInstance> team1, 
        List<L1PcInstance> team2
    ) {
        // å‰µå»ºå¯¦ä¾‹åœ°åœ–
        int mapId = L1InstanceMap.getInstance()
            .addInstanceMap(config.getBaseMapId());
        
        // å‰µå»ºå°æˆ°å¯¦ä¾‹
        L1BattleArena arena = new L1BattleArena(
            mapId, team1, team2, config
        );
        
        _activeArenas.put(arena.getId(), arena);
        return arena;
    }
}

// 3. å°æˆ°å¯¦ä¾‹
public class L1BattleArena {
    private int _mapId;
    private List<L1PcInstance> _team1;
    private List<L1PcInstance> _team2;
    private BattleState _state;
    
    public void start() {
        // å‚³é€ç©å®¶åˆ°å¯¦ä¾‹åœ°åœ–
        teleportPlayers();
        
        // é–‹å§‹å°æˆ°è¨ˆæ™‚
        startTimer();
        
        // è¨­ç½®å°æˆ°è¦å‰‡
        setupRules();
    }
    
    public void end() {
        // è¨ˆç®—çµæœ
        calculateResult();
        
        // å‚³é€ç©å®¶å›ä¸»ä¸–ç•Œ
        teleportBack();
        
        // æ¸…ç†å¯¦ä¾‹åœ°åœ–
        L1InstanceMap.getInstance()
            .removeInstanceMap(_mapId);
    }
}
```

### 5.2 æ•¸æ“šåº«è¨­è¨ˆ

```sql
-- å°æˆ°é…ç½®è¡¨
CREATE TABLE `battle_arenas` (
  `id` int(10) unsigned NOT NULL,
  `name` varchar(255) NOT NULL,
  `base_map_id` int(10) unsigned NOT NULL,
  `team_size` int(10) unsigned NOT NULL DEFAULT '5',
  `duration` int(10) unsigned NOT NULL DEFAULT '600',
  `min_level` int(10) unsigned NOT NULL,
  `max_level` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- å°æˆ°è¨˜éŒ„è¡¨
CREATE TABLE `battle_records` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `arena_id` int(10) unsigned NOT NULL,
  `team1_players` text NOT NULL,
  `team2_players` text NOT NULL,
  `winner` tinyint(3) unsigned NOT NULL,
  `start_time` datetime NOT NULL,
  `end_time` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
```

### 5.3 å¯¦ç¾æ­¥é©Ÿ

**ç¬¬ 1 é€±ï¼šåŸºç¤æ¶æ§‹**
1. å‰µå»º `BattleArenaTable` æ•¸æ“šè¡¨é¡
2. å‰µå»º `L1BattleArenaConfig` é…ç½® Bean
3. å‰µå»º `L1BattleArenaManager` ç®¡ç†å™¨
4. è¨­è¨ˆæ•¸æ“šåº«è¡¨çµæ§‹

**ç¬¬ 2 é€±ï¼šæ ¸å¿ƒåŠŸèƒ½**
1. å¯¦ç¾å¯¦ä¾‹åœ°åœ–å‰µå»ºå’Œæ¸…ç†
2. å¯¦ç¾ç©å®¶å‚³é€é‚è¼¯
3. å¯¦ç¾å°æˆ°è¨ˆæ™‚å™¨
4. å¯¦ç¾å°æˆ°è¦å‰‡ï¼ˆ5v5ã€å‹è² åˆ¤å®šï¼‰

**ç¬¬ 3 é€±ï¼šå®Œå–„åŠŸèƒ½**
1. å¯¦ç¾å°æˆ°çµæœè¨˜éŒ„
2. å¯¦ç¾çå‹µç³»çµ±
3. å¯¦ç¾ GM å‘½ä»¤
4. æ¸¬è©¦å’Œèª¿è©¦

### 5.4 å„ªå‹¢ç¸½çµ

âœ… **é–‹ç™¼å¿«é€Ÿ**ï¼šåˆ©ç”¨ç¾æœ‰å¯¦ä¾‹åœ°åœ–ç³»çµ±ï¼Œç„¡éœ€å¾é›¶å¯¦ç¾
âœ… **ç©©å®šå¯é **ï¼šåŸºæ–¼æˆç†Ÿçš„æ¶æ§‹ï¼Œé¢¨éšªä½
âœ… **æ˜“æ–¼ç¶­è­·**ï¼šæ¨¡å¡ŠåŒ–è¨­è¨ˆï¼Œå¾ŒçºŒç¶­è­·ç°¡å–®
âœ… **æ˜“æ–¼æ“´å±•**ï¼šå¯ä»¥è¼•é¬†æ·»åŠ æ–°çš„å°æˆ°æ¨¡å¼

---

## å…­ã€çµè«–

### 6.1 é•·æœŸç¶­è­·æ€§

**ğŸ† æ¨è–¦ï¼šL1J é–‹æºé …ç›®**

- æ¨¡å¡ŠåŒ–è¨­è¨ˆï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•
- ä»£ç¢¼çµæ§‹æ¸…æ™°ï¼Œæ–°äººæ˜“ä¸Šæ‰‹
- å®Œæ•´çš„è¨»é‡‹å’Œæ–‡æª”
- æ¸¬è©¦å’Œèª¿è©¦å®¹æ˜“

### 6.2 åŠŸèƒ½æ“´å±•æ€§ï¼ˆ5v5 å°æˆ°åœ°åœ–ï¼‰

**ğŸ† å¼·çƒˆæ¨è–¦ï¼šL1J é–‹æºé …ç›®**

- âœ… **å·²æœ‰å¯¦ä¾‹åœ°åœ–ç³»çµ±**ï¼Œå¯ç›´æ¥ä½¿ç”¨
- âœ… **å·²æœ‰å°æˆ°ç³»çµ±åƒè€ƒ**ï¼Œé–‹ç™¼å¿«é€Ÿ
- âœ… **é–‹ç™¼æ™‚é–“çŸ­**ï¼ˆ2-3 é€± vs 4-6 é€±ï¼‰
- âœ… **ç©©å®šæ€§é«˜**ï¼Œé¢¨éšªä½

### 6.3 æœ€çµ‚å»ºè­°

**é¸æ“‡ L1J é–‹æºé …ç›®ï¼Œå¦‚æœï¼š**
- âœ… éœ€è¦é•·æœŸç¶­è­·å’Œæ“´å±•
- âœ… éœ€è¦æ·»åŠ æ–°åŠŸèƒ½ï¼ˆå¦‚ 5v5 å°æˆ°ï¼‰
- âœ… åœ˜éšŠéœ€è¦æ¸…æ™°çš„ä»£ç¢¼çµæ§‹
- âœ… éœ€è¦å¿«é€Ÿé–‹ç™¼æ–°åŠŸèƒ½

**é¸æ“‡ Server-182ï¼Œå¦‚æœï¼š**
- âœ… éœ€è¦æ¥µé«˜çš„ç¶²çµ¡æ€§èƒ½ï¼ˆæ•¸åƒäººï¼‰
- âœ… ä¸éœ€è¦é »ç¹æ“´å±•åŠŸèƒ½
- âœ… åœ˜éšŠç†Ÿæ‚‰ MINA æ¡†æ¶
- âœ… éœ€è¦åš´æ ¼çš„å®‰å…¨é˜²è­·

---

**å ±å‘Šç”Ÿæˆæ™‚é–“**: 2026-01-21
**åˆ†æç‰ˆæœ¬**: L1J é–‹æºé …ç›® vs Server-182
**è©•ä¼°åŠŸèƒ½**: 5v5 å°æˆ°åœ°åœ–æ“´å±•
